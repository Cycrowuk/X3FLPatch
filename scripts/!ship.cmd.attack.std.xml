<?xml version="1.0" standalone="yes" ?>
<?xml-stylesheet href="x2script.xsl" type="text/xsl" ?>
<script>
<name>!ship.cmd.attack.std</name>
<version>4</version>
<engineversion>72</engineversion>
<description>Ship Standard COMMAND ATTACK</description>
<arguments>
<argument index="1" name="victim" type="Var/Ship/Station" desc="the victim" />
<argument index="2" name="nofollowsec" type="Var/Boolean" desc="do not follow in new sector" />
</arguments>
<sourceplaintext>
<![CDATA[
  if $victim -> exists
    [THIS] ->set command: COMMAND_ATTACK  target=$victim target2=$followsec par1=null par2=null
    $owner = $victim -> get owner race
    skip if [OWNER] != $owner
      return null
    $followsec = ! $nofollowsec
    
    if [THIS] -> is docked
@     = [THIS] -> call script !move.undock : 
    end
    
@   = [THIS] -> call script !lib.move.resupply.energy :  Ignore AutoJump=[FALSE]  Target=$victim
    
@   $ret = [THIS] -> call script !fight.attack.object :  the victim=$victim  follow in new sector=$followsec  Only attack shields=[FALSE]
  end
  return $ret
]]>
</sourceplaintext>
<sourcetext>
<line indent=""><var>if&#160;</var><var>$victim&#160;-&gt;</var><text>&#160;exists</text></line>
<line indent="&#160;"><var>[THIS]&#160;-&gt;</var><text>set&#160;command:&#160;</text><var>COMMAND_ATTACK</var><text>&#160;&#160;target=</text><var>$victim</var><text>&#160;target2=</text><var>$followsec</var><text>&#160;par1=</text><var>null</var><text>&#160;par2=</text><var>null</var></line>
<line indent="&#160;"><var>$owner&#160;=&#160;</var><var>$victim&#160;-&gt;</var><text>&#160;get&#160;owner&#160;race</text></line>
<line indent="&#160;"><var>skip&#160;if&#160;</var><var>[OWNER]</var><text>&#160;</text><var>!=</var><text>&#160;</text><var>$owner</var></line>
<line indent="&#160;&#160;"><text>return&#160;</text><var>null</var></line>
<line indent="&#160;"><var>$followsec&#160;=&#160;</var><var>!</var><text>&#160;</text><var>$nofollowsec</var></line>
<line indent="&#160;"></line>
<line indent="&#160;"><var>if&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;is&#160;docked</text></line>
<line interruptable="@" indent="&#160;&#160;"><var>=&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>!move.undock</call><text>&#160;:&#160;</text></line>
<line indent="&#160;"><text>end</text></line>
<line indent="&#160;"></line>
<line interruptable="@" indent="&#160;"><var>=&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>!lib.move.resupply.energy</call><text>&#160;:&#160;</text><text>&#160;Ignore&#160;AutoJump=</text><var>[FALSE]</var><text>&#160;</text><text>&#160;Target=</text><var>$victim</var></line>
<line indent="&#160;"></line>
<line interruptable="@" indent="&#160;"><var>$ret&#160;=&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>!fight.attack.object</call><text>&#160;:&#160;</text><text>&#160;the&#160;victim=</text><var>$victim</var><text>&#160;</text><text>&#160;follow&#160;in&#160;new&#160;sector=</text><var>$followsec</var><text>&#160;</text><text>&#160;Only&#160;attack&#160;shields=</text><var>[FALSE]</var></line>
<line indent=""><text>end</text></line>
<line indent=""><text>return&#160;</text><var>$ret</var></line>
</sourcetext>
<codearray>

<sval type="array" size="10">
  <sval type="string" val="!ship.cmd.attack.std"/>
  <sval type="int" val="72"/>
  <sval type="string" val="Ship Standard COMMAND ATTACK"/>
  <sval type="int" val="4"/>
  <sval type="int" val="0"/>
  <sval type="array" size="5">
    <sval type="string" val="victim"/>
    <sval type="string" val="nofollowsec"/>
    <sval type="string" val="followsec"/>
    <sval type="string" val="owner"/>
    <sval type="string" val="ret"/>
  </sval>
  <sval type="array" size="11">
    <sval type="array" size="4">
      <sval type="int" val="706"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
      <sval type="int" val="-1610610173"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="538"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="18"/>
      <sval type="int" val="13"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="2"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="701"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
      <sval type="int" val="3"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="-536869625"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="7"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="3"/>
      <sval type="int" val="15"/>
      <sval type="int" val="1"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="103"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="10">
      <sval type="int" val="104"/>
      <sval type="int" val="2"/>
      <sval type="int" val="2"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="1"/>
      <sval type="int" val="15"/>
      <sval type="int" val="65556"/>
      <sval type="int" val="2"/>
      <sval type="int" val="65556"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="745"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1610610685"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="102"/>
      <sval type="string" val="!move.undock"/>
      <sval type="int" val="-2147483647"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="10">
      <sval type="int" val="102"/>
      <sval type="string" val="!lib.move.resupply.energy"/>
      <sval type="int" val="-2147483647"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="2"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="9"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="12">
      <sval type="int" val="102"/>
      <sval type="string" val="!fight.attack.object"/>
      <sval type="int" val="4"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="2"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="9"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="103"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="4"/>
    </sval>
  </sval>
  <sval type="array" size="2">
    <sval type="array" size="2">
      <sval type="int" val="22"/>
      <sval type="string" val="the victim"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="63"/>
      <sval type="string" val="do not follow in new sector"/>
    </sval>
  </sval>
  <sval type="array" size="5">
    <sval type="array" size="2">
      <sval type="int" val="6"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="8"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="8"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="9"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="10"/>
      <sval type="int" val="4"/>
    </sval>
  </sval>
  <sval type="int" val="13"/>
</sval>

</codearray>
<nosignature>4132</nosignature>
</script>
