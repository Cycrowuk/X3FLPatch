<?xml version="1.0" standalone="yes" ?>
<?xml-stylesheet href="x2script.xsl" type="text/xsl" ?>
<script>
<name>plugin.st.ex.station.run</name>
<version>3</version>
<engineversion>62</engineversion>
<description>Stock Exchange: Local exchange menu</description>
<arguments>
</arguments>
<sourceplaintext>
<![CDATA[
  $DEFINE.UPDATETIME = 1200
  $DEFINE.STOREAMOUNT = 10
  $DEFINE.CYCLETIMES = 10
  
  [THIS] ->set local variable: name='st.ex.run' value=[TRUE]
  
  
  $stored.data.array = [THIS] -> get local variable: name='st.ex.stored'
  skip if $stored.data.array
    $stored.data.array = array alloc: size=0
  
  $last.update = [THIS] -> get local variable: name='st.ex.time'
  if not $last.update
    $last.update = playing time
  end
  
  $wait.cycle = 0
  
  [THIS] ->set local variable: name='st.ex.stored' value=$stored.data.array
  [THIS] ->set local variable: name='st.ex.time' value=$last.update
  
  gosub sub.UpdateSectors
  
  $owned.data = [THIS] -> get local variable: name='st.ex.owned'
  if not $owned.data
    $owned.data = table alloc
    [THIS] ->set local variable: name='st.ex.owned' value=$owned.data
  end
  
  while [THIS] -> get local variable: name='st.ex.run'
    
    if is a new script version available
      [THIS] ->set local variable: name='st.ex.run' value=null
      $script.name = get script name
      $script.task = get task ID
@     START [NULL] -> call script !lib.restart.task :  Object=[THIS]  Script=$script.name  Task=$script.task  Argument 1=null  Argument 2=null  Argument 3=null  Argument 4=null  Argument 5=null
      return null
    end
    
@   = wait randomly from 7000 to 10000 ms
    $current.menu.station = get global variable: name='st.ex.current'
    if $current.menu.station != [THIS]
      dec $wait.cycle = 
      do if $wait.cycle > 0
        continue
    end
    
    $wait.cycle = $DEFINE.CYCLETIMES
    
    gosub sub.UpdateSectors
    gosub sub.UpdateData
    gosub sub.ComputeCurrent
    gosub sub.ComputeTrend
    gosub sub.SaveData
    
    $current.time = playing time
    if $current.time >= ( $last.update + $DEFINE.UPDATETIME )
      $last.update = $current.time
      [THIS] ->set local variable: name='st.ex.time' value=$last.update
      gosub sub.UpdateWares
    end
  end
  
  return null
  
  sub.UpdateSectors:
  $exh.sector = [THIS] -> get sector
  $array.sectors = get cluster sectors for race [OWNER], startsector: $exh.sector, threshold: 2, only include known: [FALSE]
  
  $table.exchage = get global variable: name='st.ex.sta'
  if not $table.exchage
    $table.exchage = table alloc
    set global variable: name='st.ex.sta' value=$table.exchage
  end
  $table.exchage[[THIS]] = $array.sectors
  endsub
  
  sub.UpdateWares:
  append $table.wares to array $stored.data.array
  $size = size of array $stored.data.array
  while $size > $DEFINE.STOREAMOUNT
    remove element from array $stored.data.array at index 0
    $size = size of array $stored.data.array
  end
  endsub
  
  
  sub.SaveData:
  $stored.data = array alloc: size=6
  $stored.data[0] = $array.wares
  $stored.data[1] = $table.products
  $stored.data[2] = $table.resources
  $stored.data[3] = $table.current
  $stored.data[4] = $table.trend
  $stored.data[5] = $table.wares
  [THIS] ->set local variable: name='st.ex.current' value=$stored.data
  endsub
  
  
  sub.UpdateData:
@ $ware.data = [THIS] -> call script plugin.st.ex.loc.ex.ProdResCheck :  Local Sectors Array :=$array.sectors  Do Waits T/F :=[FALSE]
  $table.products = $ware.data[0]
  $table.resources = $ware.data[1]
  $table.wares = merge tables, $table.products, $table.resources, null, null, null
  $array.wares = sort table keys: table=$table.wares
  gosub sub.UpdatePrices
  endsub
  
  sub.UpdatePrices:
  $next = get next key: table=$table.wares key=null
  while $next
    $ware = $next
    $next = get next key: table=$table.wares key=$next
    
    $product.count = $table.products[$ware]
    $resource.count = $table.resources[$ware]
    skip if $product.count
      $product.count = 0
    skip if $resource.count
      $resource.count = 0
    $percent = ( $product.count * 100 ) / $resource.count
    skip if $percent
      $percent = 0
    do if $percent > 100
      $percent = 100
    $price.max = get max price of ware $ware
    $price.min = get min price of ware $ware
    $price.range = $price.max - $price.min
    if $percent <= 0
      $price = $price.max
    else if $percent >= 100
      $price = $price.min
    else
      $price = $price.max - ( ( $percent * $price.range ) / 100 )
    end
    $table.wares[$ware] = $price
  end
  endsub
  
  
  sub.ComputeTrend:
  $table.trend = table alloc
  $ware = get next key: table=$table.wares key=null
  while $ware
    $trend.array = array alloc: size=0
    $i = size of array $stored.data.array
    while $i
      dec $i = 
      $price = $stored.data.array[$i][$ware]
      insert $price into array $trend.array at index 0
      $size = size of array $trend.array
      do if $size >= 5
        break
    end
    
    $table.trend[$ware] = $trend.array
    $ware = get next key: table=$table.wares key=$ware
  end
  endsub
  
  
  sub.ComputeCurrent:
  $table.current = table alloc
  $ware = get next key: table=$table.wares key=null
  while $ware
    $total.price = $table.wares[$ware]
    $count.amt = 1
    
    $i = size of array $stored.data.array
    while $i
      dec $i = 
      $price = $stored.data.array[$i][$ware]
      if $price
        $total.price = $total.price + $price
        inc $count.amt = 
      end
    end
    
    $price = $total.price / $count.amt
    $table.current[$ware] = $price
    $ware = get next key: table=$table.wares key=$ware
  end
  endsub
  return null
]]>
</sourceplaintext>
<sourcetext>
<line indent=""><var>$DEFINE.UPDATETIME&#160;=&#160;</var><var>1200</var></line>
<line indent=""><var>$DEFINE.STOREAMOUNT&#160;=&#160;</var><var>10</var></line>
<line indent=""><var>$DEFINE.CYCLETIMES&#160;=&#160;</var><var>10</var></line>
<line indent=""></line>
<line indent=""><var>[THIS]&#160;-&gt;</var><text>set&#160;local&#160;variable:&#160;name=</text><var>'st.ex.run'</var><text>&#160;value=</text><var>[TRUE]</var></line>
<line indent=""></line>
<line indent=""></line>
<line indent=""><var>$stored.data.array&#160;=&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;get&#160;local&#160;variable:&#160;name=</text><var>'st.ex.stored'</var></line>
<line indent=""><var>skip&#160;if&#160;</var><var>$stored.data.array</var></line>
<line indent="&#160;"><var>$stored.data.array&#160;=&#160;</var><text>array&#160;alloc:&#160;size=</text><var>0</var></line>
<line indent=""></line>
<line indent=""><var>$last.update&#160;=&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;get&#160;local&#160;variable:&#160;name=</text><var>'st.ex.time'</var></line>
<line indent=""><var>if&#160;not&#160;</var><var>$last.update</var></line>
<line indent="&#160;"><var>$last.update&#160;=&#160;</var><text>playing&#160;time</text></line>
<line indent=""><text>end</text></line>
<line indent=""></line>
<line indent=""><var>$wait.cycle&#160;=&#160;</var><var>0</var></line>
<line indent=""></line>
<line indent=""><var>[THIS]&#160;-&gt;</var><text>set&#160;local&#160;variable:&#160;name=</text><var>'st.ex.stored'</var><text>&#160;value=</text><var>$stored.data.array</var></line>
<line indent=""><var>[THIS]&#160;-&gt;</var><text>set&#160;local&#160;variable:&#160;name=</text><var>'st.ex.time'</var><text>&#160;value=</text><var>$last.update</var></line>
<line indent=""></line>
<line indent=""><text>gosub&#160;</text><var>sub.UpdateSectors</var></line>
<line indent=""></line>
<line indent=""><var>$owned.data&#160;=&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;get&#160;local&#160;variable:&#160;name=</text><var>'st.ex.owned'</var></line>
<line indent=""><var>if&#160;not&#160;</var><var>$owned.data</var></line>
<line indent="&#160;"><var>$owned.data&#160;=&#160;</var><text>table&#160;alloc</text></line>
<line indent="&#160;"><var>[THIS]&#160;-&gt;</var><text>set&#160;local&#160;variable:&#160;name=</text><var>'st.ex.owned'</var><text>&#160;value=</text><var>$owned.data</var></line>
<line indent=""><text>end</text></line>
<line indent=""></line>
<line indent=""><var>while&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;get&#160;local&#160;variable:&#160;name=</text><var>'st.ex.run'</var></line>
<line indent="&#160;"></line>
<line indent="&#160;"><var>if&#160;</var><text>is&#160;a&#160;new&#160;script&#160;version&#160;available</text></line>
<line indent="&#160;&#160;"><var>[THIS]&#160;-&gt;</var><text>set&#160;local&#160;variable:&#160;name=</text><var>'st.ex.run'</var><text>&#160;value=</text><var>null</var></line>
<line indent="&#160;&#160;"><var>$script.name&#160;=&#160;</var><text>get&#160;script&#160;name</text></line>
<line indent="&#160;&#160;"><var>$script.task&#160;=&#160;</var><text>get&#160;task&#160;ID</text></line>
<line interruptable="@" indent="&#160;&#160;"><var>START&#160;</var><var>[NULL]&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>!lib.restart.task</call><text>&#160;:&#160;</text><text>&#160;Object=</text><var>[THIS]</var><text>&#160;</text><text>&#160;Script=</text><var>$script.name</var><text>&#160;</text><text>&#160;Task=</text><var>$script.task</var><text>&#160;</text><text>&#160;Argument&#160;1=</text><var>null</var><text>&#160;</text><text>&#160;Argument&#160;2=</text><var>null</var><text>&#160;</text><text>&#160;Argument&#160;3=</text><var>null</var><text>&#160;</text><text>&#160;Argument&#160;4=</text><var>null</var><text>&#160;</text><text>&#160;Argument&#160;5=</text><var>null</var></line>
<line indent="&#160;&#160;"><text>return&#160;</text><var>null</var></line>
<line indent="&#160;"><text>end</text></line>
<line indent="&#160;"></line>
<line interruptable="@" indent="&#160;"><var>=&#160;</var><text>wait&#160;randomly&#160;from&#160;</text><var>7000</var><text>&#160;to&#160;</text><var>10000</var><text>&#160;ms</text></line>
<line indent="&#160;"><var>$current.menu.station&#160;=&#160;</var><text>get&#160;global&#160;variable:&#160;name=</text><var>'st.ex.current'</var></line>
<line indent="&#160;"><var>if&#160;</var><var>$current.menu.station</var><text>&#160;</text><var>!=</var><text>&#160;</text><var>[THIS]</var></line>
<line indent="&#160;&#160;"><text>dec&#160;</text><var>$wait.cycle&#160;=&#160;</var></line>
<line indent="&#160;&#160;"><var>do&#160;if&#160;</var><var>$wait.cycle</var><text>&#160;</text><var>&gt;</var><text>&#160;</text><var>0</var></line>
<line indent="&#160;&#160;&#160;"><text>continue</text></line>
<line indent="&#160;"><text>end</text></line>
<line indent="&#160;"></line>
<line indent="&#160;"><var>$wait.cycle&#160;=&#160;</var><var>$DEFINE.CYCLETIMES</var></line>
<line indent="&#160;"></line>
<line indent="&#160;"><text>gosub&#160;</text><var>sub.UpdateSectors</var></line>
<line indent="&#160;"><text>gosub&#160;</text><var>sub.UpdateData</var></line>
<line indent="&#160;"><text>gosub&#160;</text><var>sub.ComputeCurrent</var></line>
<line indent="&#160;"><text>gosub&#160;</text><var>sub.ComputeTrend</var></line>
<line indent="&#160;"><text>gosub&#160;</text><var>sub.SaveData</var></line>
<line indent="&#160;"></line>
<line indent="&#160;"><var>$current.time&#160;=&#160;</var><text>playing&#160;time</text></line>
<line indent="&#160;"><var>if&#160;</var><var>$current.time</var><text>&#160;</text><var>&gt;=</var><text>&#160;</text><var>(</var><text>&#160;</text><var>$last.update</var><text>&#160;</text><var>+</var><text>&#160;</text><var>$DEFINE.UPDATETIME</var><text>&#160;</text><var>)</var></line>
<line indent="&#160;&#160;"><var>$last.update&#160;=&#160;</var><var>$current.time</var></line>
<line indent="&#160;&#160;"><var>[THIS]&#160;-&gt;</var><text>set&#160;local&#160;variable:&#160;name=</text><var>'st.ex.time'</var><text>&#160;value=</text><var>$last.update</var></line>
<line indent="&#160;&#160;"><text>gosub&#160;</text><var>sub.UpdateWares</var></line>
<line indent="&#160;"><text>end</text></line>
<line indent=""><text>end</text></line>
<line indent=""></line>
<line indent=""><text>return&#160;</text><var>null</var></line>
<line indent=""></line>
<line indent=""><var>sub.UpdateSectors</var><text>:</text></line>
<line indent=""><var>$exh.sector&#160;=&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;get&#160;sector</text></line>
<line indent=""><var>$array.sectors&#160;=&#160;</var><text>get&#160;cluster&#160;sectors&#160;for&#160;race&#160;</text><var>[OWNER]</var><text>,&#160;startsector:&#160;</text><var>$exh.sector</var><text>,&#160;threshold:&#160;</text><var>2</var><text>,&#160;only&#160;include&#160;known:&#160;</text><var>[FALSE]</var></line>
<line indent=""></line>
<line indent=""><var>$table.exchage&#160;=&#160;</var><text>get&#160;global&#160;variable:&#160;name=</text><var>'st.ex.sta'</var></line>
<line indent=""><var>if&#160;not&#160;</var><var>$table.exchage</var></line>
<line indent="&#160;"><var>$table.exchage&#160;=&#160;</var><text>table&#160;alloc</text></line>
<line indent="&#160;"><text>set&#160;global&#160;variable:&#160;name=</text><var>'st.ex.sta'</var><text>&#160;value=</text><var>$table.exchage</var></line>
<line indent=""><text>end</text></line>
<line indent=""><var>$table.exchage</var><text>[</text><var>[THIS]</var><text>]&#160;=&#160;</text><var>$array.sectors</var></line>
<line indent=""><text>endsub</text></line>
<line indent=""></line>
<line indent=""><var>sub.UpdateWares</var><text>:</text></line>
<line indent=""><text>append&#160;</text><var>$table.wares</var><text>&#160;to&#160;array&#160;</text><var>$stored.data.array</var></line>
<line indent=""><var>$size&#160;=&#160;</var><text>size&#160;of&#160;array&#160;</text><var>$stored.data.array</var></line>
<line indent=""><var>while&#160;</var><var>$size</var><text>&#160;</text><var>&gt;</var><text>&#160;</text><var>$DEFINE.STOREAMOUNT</var></line>
<line indent="&#160;"><text>remove&#160;element&#160;from&#160;array&#160;</text><var>$stored.data.array</var><text>&#160;at&#160;index&#160;</text><var>0</var></line>
<line indent="&#160;"><var>$size&#160;=&#160;</var><text>size&#160;of&#160;array&#160;</text><var>$stored.data.array</var></line>
<line indent=""><text>end</text></line>
<line indent=""><text>endsub</text></line>
<line indent=""></line>
<line indent=""></line>
<line indent=""><var>sub.SaveData</var><text>:</text></line>
<line indent=""><var>$stored.data&#160;=&#160;</var><text>array&#160;alloc:&#160;size=</text><var>6</var></line>
<line indent=""><var>$stored.data</var><text>[</text><var>0</var><text>]&#160;=&#160;</text><var>$array.wares</var></line>
<line indent=""><var>$stored.data</var><text>[</text><var>1</var><text>]&#160;=&#160;</text><var>$table.products</var></line>
<line indent=""><var>$stored.data</var><text>[</text><var>2</var><text>]&#160;=&#160;</text><var>$table.resources</var></line>
<line indent=""><var>$stored.data</var><text>[</text><var>3</var><text>]&#160;=&#160;</text><var>$table.current</var></line>
<line indent=""><var>$stored.data</var><text>[</text><var>4</var><text>]&#160;=&#160;</text><var>$table.trend</var></line>
<line indent=""><var>$stored.data</var><text>[</text><var>5</var><text>]&#160;=&#160;</text><var>$table.wares</var></line>
<line indent=""><var>[THIS]&#160;-&gt;</var><text>set&#160;local&#160;variable:&#160;name=</text><var>'st.ex.current'</var><text>&#160;value=</text><var>$stored.data</var></line>
<line indent=""><text>endsub</text></line>
<line indent=""></line>
<line indent=""></line>
<line indent=""><var>sub.UpdateData</var><text>:</text></line>
<line interruptable="@" indent=""><var>$ware.data&#160;=&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>plugin.st.ex.loc.ex.ProdResCheck</call><text>&#160;:&#160;</text><text>&#160;Local&#160;Sectors&#160;Array&#160;:=</text><var>$array.sectors</var><text>&#160;</text><text>&#160;Do&#160;Waits&#160;T/F&#160;:=</text><var>[FALSE]</var></line>
<line indent=""><var>$table.products&#160;=&#160;</var><var>$ware.data</var><text>[</text><var>0</var><text>]</text></line>
<line indent=""><var>$table.resources&#160;=&#160;</var><var>$ware.data</var><text>[</text><var>1</var><text>]</text></line>
<line indent=""><var>$table.wares&#160;=&#160;</var><text>merge&#160;tables,&#160;</text><var>$table.products</var><text>,&#160;</text><var>$table.resources</var><text>,&#160;</text><var>null</var><text>,&#160;</text><var>null</var><text>,&#160;</text><var>null</var></line>
<line indent=""><var>$array.wares&#160;=&#160;</var><text>sort&#160;table&#160;keys:&#160;table=</text><var>$table.wares</var></line>
<line indent=""><text>gosub&#160;</text><var>sub.UpdatePrices</var></line>
<line indent=""><text>endsub</text></line>
<line indent=""></line>
<line indent=""><var>sub.UpdatePrices</var><text>:</text></line>
<line indent=""><var>$next&#160;=&#160;</var><text>get&#160;next&#160;key:&#160;table=</text><var>$table.wares</var><text>&#160;key=</text><var>null</var></line>
<line indent=""><var>while&#160;</var><var>$next</var></line>
<line indent="&#160;"><var>$ware&#160;=&#160;</var><var>$next</var></line>
<line indent="&#160;"><var>$next&#160;=&#160;</var><text>get&#160;next&#160;key:&#160;table=</text><var>$table.wares</var><text>&#160;key=</text><var>$next</var></line>
<line indent="&#160;"></line>
<line indent="&#160;"><var>$product.count&#160;=&#160;</var><var>$table.products</var><text>[</text><var>$ware</var><text>]</text></line>
<line indent="&#160;"><var>$resource.count&#160;=&#160;</var><var>$table.resources</var><text>[</text><var>$ware</var><text>]</text></line>
<line indent="&#160;"><var>skip&#160;if&#160;</var><var>$product.count</var></line>
<line indent="&#160;&#160;"><var>$product.count&#160;=&#160;</var><var>0</var></line>
<line indent="&#160;"><var>skip&#160;if&#160;</var><var>$resource.count</var></line>
<line indent="&#160;&#160;"><var>$resource.count&#160;=&#160;</var><var>0</var></line>
<line indent="&#160;"><var>$percent&#160;=&#160;</var><var>(</var><text>&#160;</text><var>$product.count</var><text>&#160;</text><var>*</var><text>&#160;</text><var>100</var><text>&#160;</text><var>)</var><text>&#160;</text><var>/</var><text>&#160;</text><var>$resource.count</var></line>
<line indent="&#160;"><var>skip&#160;if&#160;</var><var>$percent</var></line>
<line indent="&#160;&#160;"><var>$percent&#160;=&#160;</var><var>0</var></line>
<line indent="&#160;"><var>do&#160;if&#160;</var><var>$percent</var><text>&#160;</text><var>&gt;</var><text>&#160;</text><var>100</var></line>
<line indent="&#160;&#160;"><var>$percent&#160;=&#160;</var><var>100</var></line>
<line indent="&#160;"><var>$price.max&#160;=&#160;</var><text>get&#160;max&#160;price&#160;of&#160;ware&#160;</text><var>$ware</var></line>
<line indent="&#160;"><var>$price.min&#160;=&#160;</var><text>get&#160;min&#160;price&#160;of&#160;ware&#160;</text><var>$ware</var></line>
<line indent="&#160;"><var>$price.range&#160;=&#160;</var><var>$price.max</var><text>&#160;</text><var>-</var><text>&#160;</text><var>$price.min</var></line>
<line indent="&#160;"><var>if&#160;</var><var>$percent</var><text>&#160;</text><var>&lt;=</var><text>&#160;</text><var>0</var></line>
<line indent="&#160;&#160;"><var>$price&#160;=&#160;</var><var>$price.max</var></line>
<line indent="&#160;"><var>else&#160;if&#160;</var><var>$percent</var><text>&#160;</text><var>&gt;=</var><text>&#160;</text><var>100</var></line>
<line indent="&#160;&#160;"><var>$price&#160;=&#160;</var><var>$price.min</var></line>
<line indent="&#160;"><text>else</text></line>
<line indent="&#160;&#160;"><var>$price&#160;=&#160;</var><var>$price.max</var><text>&#160;</text><var>-</var><text>&#160;</text><var>(</var><text>&#160;</text><var>(</var><text>&#160;</text><var>$percent</var><text>&#160;</text><var>*</var><text>&#160;</text><var>$price.range</var><text>&#160;</text><var>)</var><text>&#160;</text><var>/</var><text>&#160;</text><var>100</var><text>&#160;</text><var>)</var></line>
<line indent="&#160;"><text>end</text></line>
<line indent="&#160;"><var>$table.wares</var><text>[</text><var>$ware</var><text>]&#160;=&#160;</text><var>$price</var></line>
<line indent=""><text>end</text></line>
<line indent=""><text>endsub</text></line>
<line indent=""></line>
<line indent=""></line>
<line indent=""><var>sub.ComputeTrend</var><text>:</text></line>
<line indent=""><var>$table.trend&#160;=&#160;</var><text>table&#160;alloc</text></line>
<line indent=""><var>$ware&#160;=&#160;</var><text>get&#160;next&#160;key:&#160;table=</text><var>$table.wares</var><text>&#160;key=</text><var>null</var></line>
<line indent=""><var>while&#160;</var><var>$ware</var></line>
<line indent="&#160;"><var>$trend.array&#160;=&#160;</var><text>array&#160;alloc:&#160;size=</text><var>0</var></line>
<line indent="&#160;"><var>$i&#160;=&#160;</var><text>size&#160;of&#160;array&#160;</text><var>$stored.data.array</var></line>
<line indent="&#160;"><var>while&#160;</var><var>$i</var></line>
<line indent="&#160;&#160;"><text>dec&#160;</text><var>$i&#160;=&#160;</var></line>
<line indent="&#160;&#160;"><var>$price&#160;=&#160;</var><var>$stored.data.array</var><text>[</text><var>$i</var><text>][</text><var>$ware</var><text>]</text></line>
<line indent="&#160;&#160;"><text>insert&#160;</text><var>$price</var><text>&#160;into&#160;array&#160;</text><var>$trend.array</var><text>&#160;at&#160;index&#160;</text><var>0</var></line>
<line indent="&#160;&#160;"><var>$size&#160;=&#160;</var><text>size&#160;of&#160;array&#160;</text><var>$trend.array</var></line>
<line indent="&#160;&#160;"><var>do&#160;if&#160;</var><var>$size</var><text>&#160;</text><var>&gt;=</var><text>&#160;</text><var>5</var></line>
<line indent="&#160;&#160;&#160;"><text>break</text></line>
<line indent="&#160;"><text>end</text></line>
<line indent="&#160;"></line>
<line indent="&#160;"><var>$table.trend</var><text>[</text><var>$ware</var><text>]&#160;=&#160;</text><var>$trend.array</var></line>
<line indent="&#160;"><var>$ware&#160;=&#160;</var><text>get&#160;next&#160;key:&#160;table=</text><var>$table.wares</var><text>&#160;key=</text><var>$ware</var></line>
<line indent=""><text>end</text></line>
<line indent=""><text>endsub</text></line>
<line indent=""></line>
<line indent=""></line>
<line indent=""><var>sub.ComputeCurrent</var><text>:</text></line>
<line indent=""><var>$table.current&#160;=&#160;</var><text>table&#160;alloc</text></line>
<line indent=""><var>$ware&#160;=&#160;</var><text>get&#160;next&#160;key:&#160;table=</text><var>$table.wares</var><text>&#160;key=</text><var>null</var></line>
<line indent=""><var>while&#160;</var><var>$ware</var></line>
<line indent="&#160;"><var>$total.price&#160;=&#160;</var><var>$table.wares</var><text>[</text><var>$ware</var><text>]</text></line>
<line indent="&#160;"><var>$count.amt&#160;=&#160;</var><var>1</var></line>
<line indent="&#160;"></line>
<line indent="&#160;"><var>$i&#160;=&#160;</var><text>size&#160;of&#160;array&#160;</text><var>$stored.data.array</var></line>
<line indent="&#160;"><var>while&#160;</var><var>$i</var></line>
<line indent="&#160;&#160;"><text>dec&#160;</text><var>$i&#160;=&#160;</var></line>
<line indent="&#160;&#160;"><var>$price&#160;=&#160;</var><var>$stored.data.array</var><text>[</text><var>$i</var><text>][</text><var>$ware</var><text>]</text></line>
<line indent="&#160;&#160;"><var>if&#160;</var><var>$price</var></line>
<line indent="&#160;&#160;&#160;"><var>$total.price&#160;=&#160;</var><var>$total.price</var><text>&#160;</text><var>+</var><text>&#160;</text><var>$price</var></line>
<line indent="&#160;&#160;&#160;"><text>inc&#160;</text><var>$count.amt&#160;=&#160;</var></line>
<line indent="&#160;&#160;"><text>end</text></line>
<line indent="&#160;"><text>end</text></line>
<line indent="&#160;"></line>
<line indent="&#160;"><var>$price&#160;=&#160;</var><var>$total.price</var><text>&#160;</text><var>/</var><text>&#160;</text><var>$count.amt</var></line>
<line indent="&#160;"><var>$table.current</var><text>[</text><var>$ware</var><text>]&#160;=&#160;</text><var>$price</var></line>
<line indent="&#160;"><var>$ware&#160;=&#160;</var><text>get&#160;next&#160;key:&#160;table=</text><var>$table.wares</var><text>&#160;key=</text><var>$ware</var></line>
<line indent=""><text>end</text></line>
<line indent=""><text>endsub</text></line>
<line indent=""><text>return&#160;</text><var>null</var></line>
</sourcetext>
<codearray>

<sval type="array" size="10">
  <sval type="string" val="plugin.st.ex.station.run"/>
  <sval type="int" val="62"/>
  <sval type="string" val="Stock Exchange: Local exchange menu"/>
  <sval type="int" val="3"/>
  <sval type="int" val="0"/>
  <sval type="array" size="36">
    <sval type="string" val="DEFINE.UPDATETIME"/>
    <sval type="string" val="DEFINE.STOREAMOUNT"/>
    <sval type="string" val="DEFINE.CYCLETIMES"/>
    <sval type="string" val="stored.data.array"/>
    <sval type="string" val="last.update"/>
    <sval type="string" val="wait.cycle"/>
    <sval type="string" val="owned.data"/>
    <sval type="string" val="script.name"/>
    <sval type="string" val="script.task"/>
    <sval type="string" val="current.menu.station"/>
    <sval type="string" val="current.time"/>
    <sval type="string" val="exh.sector"/>
    <sval type="string" val="array.sectors"/>
    <sval type="string" val="table.exchage"/>
    <sval type="string" val="table.wares"/>
    <sval type="string" val="size"/>
    <sval type="string" val="stored.data"/>
    <sval type="string" val="array.wares"/>
    <sval type="string" val="table.products"/>
    <sval type="string" val="table.resources"/>
    <sval type="string" val="table.current"/>
    <sval type="string" val="table.trend"/>
    <sval type="string" val="ware.data"/>
    <sval type="string" val="next"/>
    <sval type="string" val="ware"/>
    <sval type="string" val="product.count"/>
    <sval type="string" val="resource.count"/>
    <sval type="string" val="percent"/>
    <sval type="string" val="price.max"/>
    <sval type="string" val="price.min"/>
    <sval type="string" val="price.range"/>
    <sval type="string" val="price"/>
    <sval type="string" val="trend.array"/>
    <sval type="string" val="i"/>
    <sval type="string" val="total.price"/>
    <sval type="string" val="count.amt"/>
  </sval>
  <sval type="array" size="146">
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="1200"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="1"/>
      <sval type="int" val="1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="10"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="2"/>
      <sval type="int" val="1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="10"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="155"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="5"/>
      <sval type="string" val="st.ex.run"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="10"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="156"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="5"/>
      <sval type="string" val="st.ex.stored"/>
      <sval type="int" val="3"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="-536869113"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="3"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="128"/>
      <sval type="int" val="3"/>
      <sval type="int" val="4"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="156"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="5"/>
      <sval type="string" val="st.ex.time"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="-536868348"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="4"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="141"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="5"/>
      <sval type="int" val="1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="155"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="5"/>
      <sval type="string" val="st.ex.stored"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="3"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="155"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="5"/>
      <sval type="string" val="st.ex.time"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="1167"/>
      <sval type="int" val="44"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="156"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="5"/>
      <sval type="string" val="st.ex.owned"/>
      <sval type="int" val="6"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="-536866300"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="6"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="1733"/>
      <sval type="int" val="6"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="155"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="5"/>
      <sval type="string" val="st.ex.owned"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="6"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="156"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="5"/>
      <sval type="string" val="st.ex.run"/>
      <sval type="int" val="-1610601719"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="1201"/>
      <sval type="int" val="-1610606333"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="155"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="5"/>
      <sval type="string" val="st.ex.run"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="1032"/>
      <sval type="int" val="7"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="147"/>
      <sval type="int" val="8"/>
    </sval>
    <sval type="array" size="22">
      <sval type="int" val="102"/>
      <sval type="string" val="!lib.restart.task"/>
      <sval type="int" val="-2147483646"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="12"/>
      <sval type="int" val="8"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="7"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="8"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="103"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="107"/>
      <sval type="int" val="-2147483647"/>
      <sval type="int" val="4"/>
      <sval type="int" val="7000"/>
      <sval type="int" val="4"/>
      <sval type="int" val="10000"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="158"/>
      <sval type="int" val="5"/>
      <sval type="string" val="st.ex.current"/>
      <sval type="int" val="9"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610604797"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="9"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="15"/>
      <sval type="int" val="1"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="143"/>
      <sval type="int" val="5"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610604792"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="5"/>
      <sval type="int" val="4"/>
      <sval type="int" val="0"/>
      <sval type="int" val="15"/>
      <sval type="int" val="2"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="2"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="112"/>
      <sval type="int" val="18"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="5"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="2"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="1167"/>
      <sval type="int" val="44"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="1167"/>
      <sval type="int" val="71"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="1167"/>
      <sval type="int" val="126"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="1167"/>
      <sval type="int" val="108"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="1167"/>
      <sval type="int" val="61"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="141"/>
      <sval type="int" val="10"/>
    </sval>
    <sval type="array" size="21">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610601981"/>
      <sval type="int" val="5"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="10"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="4"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
      <sval type="int" val="15"/>
      <sval type="int" val="11"/>
      <sval type="int" val="15"/>
      <sval type="int" val="4"/>
      <sval type="int" val="7"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="16"/>
      <sval type="int" val="-2"/>
      <sval type="int" val="11"/>
      <sval type="int" val="-3"/>
      <sval type="int" val="17"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="4"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="10"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="155"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="5"/>
      <sval type="string" val="st.ex.time"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="1167"/>
      <sval type="int" val="53"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="112"/>
      <sval type="int" val="18"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="103"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="101"/>
      <sval type="string" val="sub.UpdateSectors"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="703"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="11"/>
    </sval>
    <sval type="array" size="10">
      <sval type="int" val="1585"/>
      <sval type="int" val="12"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="7"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="11"/>
      <sval type="int" val="4"/>
      <sval type="int" val="2"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="9"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="158"/>
      <sval type="int" val="5"/>
      <sval type="string" val="st.ex.sta"/>
      <sval type="int" val="13"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="-536857852"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="13"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="1733"/>
      <sval type="int" val="13"/>
    </sval>
    <sval type="array" size="5">
      <sval type="int" val="157"/>
      <sval type="int" val="5"/>
      <sval type="string" val="st.ex.sta"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="13"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="130"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="13"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="12"/>
    </sval>
    <sval type="array" size="1">
      <sval type="int" val="1168"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="101"/>
      <sval type="string" val="sub.UpdateWares"/>
    </sval>
    <sval type="array" size="5">
      <sval type="int" val="135"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="14"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="131"/>
      <sval type="int" val="15"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="3"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610597367"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="15"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="1"/>
      <sval type="int" val="15"/>
      <sval type="int" val="2"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="2"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="5">
      <sval type="int" val="136"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="3"/>
      <sval type="int" val="4"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="131"/>
      <sval type="int" val="15"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="3"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="112"/>
      <sval type="int" val="56"/>
    </sval>
    <sval type="array" size="1">
      <sval type="int" val="1168"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="101"/>
      <sval type="string" val="sub.SaveData"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="128"/>
      <sval type="int" val="16"/>
      <sval type="int" val="4"/>
      <sval type="int" val="6"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="130"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="16"/>
      <sval type="int" val="4"/>
      <sval type="int" val="0"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="17"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="130"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="16"/>
      <sval type="int" val="4"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="18"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="130"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="16"/>
      <sval type="int" val="4"/>
      <sval type="int" val="2"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="19"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="130"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="16"/>
      <sval type="int" val="4"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="20"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="130"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="16"/>
      <sval type="int" val="4"/>
      <sval type="int" val="4"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="21"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="130"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="16"/>
      <sval type="int" val="4"/>
      <sval type="int" val="5"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="14"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="155"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="5"/>
      <sval type="string" val="st.ex.current"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="16"/>
    </sval>
    <sval type="array" size="1">
      <sval type="int" val="1168"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="101"/>
      <sval type="string" val="sub.UpdateData"/>
    </sval>
    <sval type="array" size="10">
      <sval type="int" val="102"/>
      <sval type="string" val="plugin.st.ex.loc.ex.ProdResCheck"/>
      <sval type="int" val="22"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="2"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="12"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="9"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="129"/>
      <sval type="int" val="18"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="22"/>
      <sval type="int" val="4"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="129"/>
      <sval type="int" val="19"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="22"/>
      <sval type="int" val="4"/>
      <sval type="int" val="1"/>
    </sval>
    <sval type="array" size="12">
      <sval type="int" val="1784"/>
      <sval type="int" val="14"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="18"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="19"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="2165"/>
      <sval type="int" val="17"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="14"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="1167"/>
      <sval type="int" val="79"/>
    </sval>
    <sval type="array" size="1">
      <sval type="int" val="1168"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="101"/>
      <sval type="string" val="sub.UpdatePrices"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="1739"/>
      <sval type="int" val="23"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="14"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610585335"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="23"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="24"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="23"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="1739"/>
      <sval type="int" val="23"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="14"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="23"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="129"/>
      <sval type="int" val="25"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="18"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="24"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="129"/>
      <sval type="int" val="26"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="19"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="24"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="-536848377"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="25"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="25"/>
      <sval type="int" val="1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="-536847865"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="26"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="26"/>
      <sval type="int" val="1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="21">
      <sval type="int" val="104"/>
      <sval type="int" val="27"/>
      <sval type="int" val="5"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="25"/>
      <sval type="int" val="4"/>
      <sval type="int" val="100"/>
      <sval type="int" val="15"/>
      <sval type="int" val="13"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="26"/>
      <sval type="int" val="15"/>
      <sval type="int" val="14"/>
      <sval type="int" val="7"/>
      <sval type="int" val="16"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="13"/>
      <sval type="int" val="-2"/>
      <sval type="int" val="17"/>
      <sval type="int" val="14"/>
      <sval type="int" val="-4"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="-536847097"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="27"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="27"/>
      <sval type="int" val="1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610588408"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="27"/>
      <sval type="int" val="4"/>
      <sval type="int" val="100"/>
      <sval type="int" val="15"/>
      <sval type="int" val="2"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="2"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="27"/>
      <sval type="int" val="1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="100"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="630"/>
      <sval type="int" val="28"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="24"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="631"/>
      <sval type="int" val="29"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="24"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="30"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="28"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="29"/>
      <sval type="int" val="15"/>
      <sval type="int" val="12"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="12"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610586877"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="27"/>
      <sval type="int" val="4"/>
      <sval type="int" val="0"/>
      <sval type="int" val="15"/>
      <sval type="int" val="5"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="5"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="31"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="28"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="112"/>
      <sval type="int" val="105"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610586107"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="27"/>
      <sval type="int" val="4"/>
      <sval type="int" val="100"/>
      <sval type="int" val="15"/>
      <sval type="int" val="4"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="31"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="29"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="112"/>
      <sval type="int" val="105"/>
    </sval>
    <sval type="array" size="29">
      <sval type="int" val="104"/>
      <sval type="int" val="31"/>
      <sval type="int" val="7"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="28"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="27"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="30"/>
      <sval type="int" val="15"/>
      <sval type="int" val="13"/>
      <sval type="int" val="4"/>
      <sval type="int" val="100"/>
      <sval type="int" val="15"/>
      <sval type="int" val="14"/>
      <sval type="int" val="15"/>
      <sval type="int" val="12"/>
      <sval type="int" val="11"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="12"/>
      <sval type="int" val="16"/>
      <sval type="int" val="16"/>
      <sval type="int" val="-2"/>
      <sval type="int" val="13"/>
      <sval type="int" val="-3"/>
      <sval type="int" val="17"/>
      <sval type="int" val="14"/>
      <sval type="int" val="-5"/>
      <sval type="int" val="17"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="130"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="14"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="24"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="31"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="112"/>
      <sval type="int" val="81"/>
    </sval>
    <sval type="array" size="1">
      <sval type="int" val="1168"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="101"/>
      <sval type="string" val="sub.ComputeTrend"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="1733"/>
      <sval type="int" val="21"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="1739"/>
      <sval type="int" val="24"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="14"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610580727"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="24"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="128"/>
      <sval type="int" val="32"/>
      <sval type="int" val="4"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="131"/>
      <sval type="int" val="33"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="3"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610581495"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="33"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="143"/>
      <sval type="int" val="33"/>
    </sval>
    <sval type="array" size="8">
      <sval type="int" val="1081"/>
      <sval type="int" val="31"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="33"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="24"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="134"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="32"/>
      <sval type="int" val="4"/>
      <sval type="int" val="0"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="31"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="131"/>
      <sval type="int" val="15"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="32"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610581752"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="15"/>
      <sval type="int" val="4"/>
      <sval type="int" val="5"/>
      <sval type="int" val="15"/>
      <sval type="int" val="4"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="112"/>
      <sval type="int" val="122"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="112"/>
      <sval type="int" val="114"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="130"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="21"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="24"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="32"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="1739"/>
      <sval type="int" val="24"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="14"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="24"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="112"/>
      <sval type="int" val="111"/>
    </sval>
    <sval type="array" size="1">
      <sval type="int" val="1168"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="101"/>
      <sval type="string" val="sub.ComputeCurrent"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="1733"/>
      <sval type="int" val="20"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="1739"/>
      <sval type="int" val="24"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="14"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610575863"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="24"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="129"/>
      <sval type="int" val="34"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="14"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="24"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="35"/>
      <sval type="int" val="1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="1"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="131"/>
      <sval type="int" val="33"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="3"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610576887"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="33"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="143"/>
      <sval type="int" val="33"/>
    </sval>
    <sval type="array" size="8">
      <sval type="int" val="1081"/>
      <sval type="int" val="31"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="33"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="24"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610577149"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="31"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="34"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="34"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="31"/>
      <sval type="int" val="15"/>
      <sval type="int" val="11"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="11"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="142"/>
      <sval type="int" val="35"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="112"/>
      <sval type="int" val="133"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="31"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="34"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="35"/>
      <sval type="int" val="15"/>
      <sval type="int" val="14"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="14"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="130"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="20"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="24"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="31"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="1739"/>
      <sval type="int" val="24"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="14"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="24"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="112"/>
      <sval type="int" val="129"/>
    </sval>
    <sval type="array" size="1">
      <sval type="int" val="1168"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="103"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
    </sval>
  </sval>
  <sval type="int" val="0"/>
  <sval type="array" size="49">
    <sval type="array" size="2">
      <sval type="int" val="3"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="4"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="4"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="7"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="10"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="10"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="11"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="13"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="14"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="18"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="18"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="19"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="25"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="25"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="31"/>
      <sval type="int" val="6"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="31"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="31"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="32"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="37"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="42"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="43"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="43"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="44"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="47"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="51"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="53"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="60"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="61"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="61"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="71"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="71"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="79"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="84"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="104"/>
      <sval type="int" val="5"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="105"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="107"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="108"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="108"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="121"/>
      <sval type="int" val="7"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="122"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="122"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="125"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="126"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="126"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="132"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="139"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="140"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="140"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="144"/>
      <sval type="int" val="4"/>
    </sval>
  </sval>
  <sval type="int" val="0"/>
</sval>

</codearray>
<nosignature>1547</nosignature>
</script>
