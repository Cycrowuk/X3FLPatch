<?xml version="1.0" standalone="yes" ?>
<?xml-stylesheet href="x2script.xsl" type="text/xsl" ?>
<script>
<name>plugin.stationmgr.finddest</name>
<version>7</version>
<engineversion>66</engineversion>
<description>Station Manager: Find destination station</description>
<arguments>
<argument index="1" name="a.ware" type="Var/Ware" desc="Ware" />
<argument index="2" name="a.wareAmt" type="Var/Number" desc="Ware Amount" />
<argument index="3" name="a.sell" type="Var/Boolean" desc="Sell?" />
<argument index="4" name="a.excludeArray" type="Value" desc="Exclude" />
<argument index="5" name="a.ships" type="Value" desc="Ship Array" />
<argument index="6" name="a.tableNoRoute.jump" type="Value" desc="No Route Table" />
<argument index="7" name="a.norouteTable.nojump" type="Value" desc="No Route (no jump)" />
<argument index="8" name="a.blacklst" type="Value" desc="Additional Blacklist" />
</arguments>
<sourceplaintext>
<![CDATA[
  * ========================================
  * Station Manager
  * ========================================
  * Finds a valid destination station
  * ========================================
  * Author: Cycrow
  * Date: 2019/11/01
  * ========================================
  
  skip if $a.excludeArray
    $a.excludeArray = array alloc: size=0
  
  $need.sats = [FALSE]
  $restrict = [THIS] -> get local variable: name='stationmgr.restrict'
  if $restrict
    do if $restrict['sats']
      $need.sats = [TRUE]
  end
  
  $table.blacklist.add = [THIS] -> get local variable: name='egosoft.stationmgr.blacklist'
@ $ship = [THIS] -> call script plugin.stationmgr.getbestship :  Ware=$a.ware  Amount=$a.wareAmt  Ships Table/Array=$a.ships  Destination=null
  
  if $ship -> get amount of ware Jumpdrive in cargo bay
    $table.noroute = $a.tableNoRoute.jump
  else
    $table.noroute = $a.norouteTable.nojump
  end
  
  $destination = null
  if $a.sell
    $max.jumps = [THIS] ->get max sell jumps
  else
    $max.jumps = [THIS] ->get max buy jumps
  end
  $ware.price = [THIS] -> get price of ware $a.ware
  if [THIS] -> is of class Dock
    if [THIS] ->is ware a tradeable: ware=$a.ware
      dec $ware.price = 
    end
  end
  
  $relval = get relvalue of $a.ware
  $MIN.RELVAL = 5000
  
  $table.supply = [THIS] ->get supply stations
  if $table.supply
    $found.supply = table alloc
    $destination = get next key: table=$table.supply key=null
    while $destination
      if $destination -> exists
        $supply.amt = 0
        if $a.sell
          if $destination -> uses ware $a.ware as primary resource
            $supply.amt = $destination -> get free amount of ware $a.ware in cargo bay
          end
        else
          if $destination -> uses ware $a.ware as product
            $supply.amt = $destination -> get true amount of ware $a.ware in cargo bay
          end
        end
        
        if $supply.amt
          $ware.relval = $supply.amt * $relval
          if $supply.amt >= $a.wareAmt OR $ware.relval > $MIN.RELVAL
            $sector = $destination -> get sector
            if not $table.noroute[$sector]
              $jumps = get jumps from sector [SECTOR] to sector $sector
              do if $jumps <= $max.jumps
                $found.supply[$destination] = $jumps
            end
          end
        end
      end
      $destination = get next key: table=$table.supply key=$destination
    end
    
    if size of table $found.supply
      $array = sort table keys by value: table=$found.supply
      while size of array $array
        $destination = $array[0]
        remove element from array $array at index 0
        if $destination -> exists
@         if not $ship -> call script !lib.player.saferoute :  Destination=$destination  Ignore Jump=[FALSE]  Always Jump=[TRUE]  Additional Blacklist=$table.blacklist.add  Ignore Fuel=[TRUE]
            $sector = $destination -> get sector
            $table.noroute[$sector] = [TRUE]
@           = wait 10 ms
          else
            return $destination
          end
        end
      end
    end
  end
  
  retry:
@ $destination = $ship -> call script lib.player.trade.finddest :  Ware=$a.ware  Ware Amount=$a.wareAmt  Sell?=$a.sell  Exclude=$a.excludeArray  No Route Table=$table.noroute  Max Jumps=null  Price=$ware.price  Only With Satellites=$need.sats  Additional Blacklist=$a.blacklst  Ignore Fuel=[TRUE]
  if not $destination -> exists
    $relval = get relvalue of $a.ware
    $ware.amt = 10000 / $relval
    do if $ware.amt < 2
      $ware.amt = 2
@   $destination = $ship -> call script lib.player.trade.finddest :  Ware=$a.ware  Ware Amount=$a.wareAmt  Sell?=$a.sell  Exclude=$a.excludeArray  No Route Table=$table.noroute  Max Jumps=null  Price=$ware.price  Only With Satellites=$need.sats  Additional Blacklist=$a.blacklst  Ignore Fuel=[TRUE]
  end
  if not $destination -> exists
    $relval = get relvalue of $a.ware
    $ware.amt = 5000 / $relval
    do if $ware.amt < 2
      $ware.amt = 2
@   $destination = $ship -> call script lib.player.trade.finddest :  Ware=$a.ware  Ware Amount=$a.wareAmt  Sell?=$a.sell  Exclude=$a.excludeArray  No Route Table=$table.noroute  Max Jumps=null  Price=$ware.price  Only With Satellites=$need.sats  Additional Blacklist=$a.blacklst  Ignore Fuel=[TRUE]
  end
  
  if $destination -> exists
    if $a.sell
      $MIN.RELVAL = 3500
      $ware.check = $destination -> get free amount of ware $a.ware in cargo bay
    else
      $MIN.RELVAL = 5000
      $ware.check = $destination -> get true amount of ware $a.ware in cargo bay
    end
    
    $ware.relval = $ware.check * $relval
    if $ware.relval < $MIN.RELVAL
      
      $ship.max = $ship -> get max amount of ware $a.ware that can be stored in cargo bay
      $ship.half = $ship.max / 2
      if $ware.check < $ship.half
        append $destination to array $a.excludeArray
@       = wait 10 ms
        goto label retry
      end
    end
  end
  
  return $destination
]]>
</sourceplaintext>
<sourcetext>
<line indent=""><comment><text>*&#160;</text><var>========================================</var></comment></line>
<line indent=""><comment><text>*&#160;</text><var>Station&#160;Manager</var></comment></line>
<line indent=""><comment><text>*&#160;</text><var>========================================</var></comment></line>
<line indent=""><comment><text>*&#160;</text><var>Finds&#160;a&#160;valid&#160;destination&#160;station</var></comment></line>
<line indent=""><comment><text>*&#160;</text><var>========================================</var></comment></line>
<line indent=""><comment><text>*&#160;</text><var>Author:&#160;Cycrow</var></comment></line>
<line indent=""><comment><text>*&#160;</text><var>Date:&#160;2019/11/01</var></comment></line>
<line indent=""><comment><text>*&#160;</text><var>========================================</var></comment></line>
<line indent=""></line>
<line indent=""><var>skip&#160;if&#160;</var><var>$a.excludeArray</var></line>
<line indent="&#160;"><var>$a.excludeArray&#160;=&#160;</var><text>array&#160;alloc:&#160;size=</text><var>0</var></line>
<line indent=""></line>
<line indent=""><var>$need.sats&#160;=&#160;</var><var>[FALSE]</var></line>
<line indent=""><var>$restrict&#160;=&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;get&#160;local&#160;variable:&#160;name=</text><var>'stationmgr.restrict'</var></line>
<line indent=""><var>if&#160;</var><var>$restrict</var></line>
<line indent="&#160;"><var>do&#160;if&#160;</var><var>$restrict</var><text>[</text><var>'sats'</var><text>]</text></line>
<line indent="&#160;&#160;"><var>$need.sats&#160;=&#160;</var><var>[TRUE]</var></line>
<line indent=""><text>end</text></line>
<line indent=""></line>
<line indent=""><var>$table.blacklist.add&#160;=&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;get&#160;local&#160;variable:&#160;name=</text><var>'egosoft.stationmgr.blacklist'</var></line>
<line interruptable="@" indent=""><var>$ship&#160;=&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>plugin.stationmgr.getbestship</call><text>&#160;:&#160;</text><text>&#160;Ware=</text><var>$a.ware</var><text>&#160;</text><text>&#160;Amount=</text><var>$a.wareAmt</var><text>&#160;</text><text>&#160;Ships&#160;Table/Array=</text><var>$a.ships</var><text>&#160;</text><text>&#160;Destination=</text><var>null</var></line>
<line indent=""></line>
<line indent=""><var>if&#160;</var><var>$ship&#160;-&gt;</var><text>&#160;get&#160;amount&#160;of&#160;ware&#160;</text><var>Jumpdrive</var><text>&#160;in&#160;cargo&#160;bay</text></line>
<line indent="&#160;"><var>$table.noroute&#160;=&#160;</var><var>$a.tableNoRoute.jump</var></line>
<line indent=""><text>else</text></line>
<line indent="&#160;"><var>$table.noroute&#160;=&#160;</var><var>$a.norouteTable.nojump</var></line>
<line indent=""><text>end</text></line>
<line indent=""></line>
<line indent=""><var>$destination&#160;=&#160;</var><var>null</var></line>
<line indent=""><var>if&#160;</var><var>$a.sell</var></line>
<line indent="&#160;"><var>$max.jumps&#160;=&#160;</var><var>[THIS]&#160;-&gt;</var><text>get&#160;max&#160;sell&#160;jumps</text></line>
<line indent=""><text>else</text></line>
<line indent="&#160;"><var>$max.jumps&#160;=&#160;</var><var>[THIS]&#160;-&gt;</var><text>get&#160;max&#160;buy&#160;jumps</text></line>
<line indent=""><text>end</text></line>
<line indent=""><var>$ware.price&#160;=&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;get&#160;price&#160;of&#160;ware&#160;</text><var>$a.ware</var></line>
<line indent=""><var>if&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;is&#160;of&#160;class&#160;</text><var>Dock</var></line>
<line indent="&#160;"><var>if&#160;</var><var>[THIS]&#160;-&gt;</var><text>is&#160;ware&#160;a&#160;tradeable:&#160;ware=</text><var>$a.ware</var></line>
<line indent="&#160;&#160;"><text>dec&#160;</text><var>$ware.price&#160;=&#160;</var></line>
<line indent="&#160;"><text>end</text></line>
<line indent=""><text>end</text></line>
<line indent=""></line>
<line indent=""><var>$relval&#160;=&#160;</var><text>get&#160;relvalue&#160;of&#160;</text><var>$a.ware</var></line>
<line indent=""><var>$MIN.RELVAL&#160;=&#160;</var><var>5000</var></line>
<line indent=""></line>
<line indent=""><var>$table.supply&#160;=&#160;</var><var>[THIS]&#160;-&gt;</var><text>get&#160;supply&#160;stations</text></line>
<line indent=""><var>if&#160;</var><var>$table.supply</var></line>
<line indent="&#160;"><var>$found.supply&#160;=&#160;</var><text>table&#160;alloc</text></line>
<line indent="&#160;"><var>$destination&#160;=&#160;</var><text>get&#160;next&#160;key:&#160;table=</text><var>$table.supply</var><text>&#160;key=</text><var>null</var></line>
<line indent="&#160;"><var>while&#160;</var><var>$destination</var></line>
<line indent="&#160;&#160;"><var>if&#160;</var><var>$destination&#160;-&gt;</var><text>&#160;exists</text></line>
<line indent="&#160;&#160;&#160;"><var>$supply.amt&#160;=&#160;</var><var>0</var></line>
<line indent="&#160;&#160;&#160;"><var>if&#160;</var><var>$a.sell</var></line>
<line indent="&#160;&#160;&#160;&#160;"><var>if&#160;</var><var>$destination&#160;-&gt;</var><text>&#160;uses&#160;ware&#160;</text><var>$a.ware</var><text>&#160;as&#160;primary&#160;resource</text></line>
<line indent="&#160;&#160;&#160;&#160;&#160;"><var>$supply.amt&#160;=&#160;</var><var>$destination&#160;-&gt;</var><text>&#160;get&#160;free&#160;amount&#160;of&#160;ware&#160;</text><var>$a.ware</var><text>&#160;in&#160;cargo&#160;bay</text></line>
<line indent="&#160;&#160;&#160;&#160;"><text>end</text></line>
<line indent="&#160;&#160;&#160;"><text>else</text></line>
<line indent="&#160;&#160;&#160;&#160;"><var>if&#160;</var><var>$destination&#160;-&gt;</var><text>&#160;uses&#160;ware&#160;</text><var>$a.ware</var><text>&#160;as&#160;product</text></line>
<line indent="&#160;&#160;&#160;&#160;&#160;"><var>$supply.amt&#160;=&#160;</var><var>$destination&#160;-&gt;</var><text>&#160;get&#160;true&#160;amount&#160;of&#160;ware&#160;</text><var>$a.ware</var><text>&#160;in&#160;cargo&#160;bay</text></line>
<line indent="&#160;&#160;&#160;&#160;"><text>end</text></line>
<line indent="&#160;&#160;&#160;"><text>end</text></line>
<line indent="&#160;&#160;&#160;"></line>
<line indent="&#160;&#160;&#160;"><var>if&#160;</var><var>$supply.amt</var></line>
<line indent="&#160;&#160;&#160;&#160;"><var>$ware.relval&#160;=&#160;</var><var>$supply.amt</var><text>&#160;</text><var>*</var><text>&#160;</text><var>$relval</var></line>
<line indent="&#160;&#160;&#160;&#160;"><var>if&#160;</var><var>$supply.amt</var><text>&#160;</text><var>&gt;=</var><text>&#160;</text><var>$a.wareAmt</var><text>&#160;</text><var>OR</var><text>&#160;</text><var>$ware.relval</var><text>&#160;</text><var>&gt;</var><text>&#160;</text><var>$MIN.RELVAL</var></line>
<line indent="&#160;&#160;&#160;&#160;&#160;"><var>$sector&#160;=&#160;</var><var>$destination&#160;-&gt;</var><text>&#160;get&#160;sector</text></line>
<line indent="&#160;&#160;&#160;&#160;&#160;"><var>if&#160;not&#160;</var><var>$table.noroute</var><text>[</text><var>$sector</var><text>]</text></line>
<line indent="&#160;&#160;&#160;&#160;&#160;&#160;"><var>$jumps&#160;=&#160;</var><text>get&#160;jumps&#160;from&#160;sector&#160;</text><var>[SECTOR]</var><text>&#160;to&#160;sector&#160;</text><var>$sector</var></line>
<line indent="&#160;&#160;&#160;&#160;&#160;&#160;"><var>do&#160;if&#160;</var><var>$jumps</var><text>&#160;</text><var>&lt;=</var><text>&#160;</text><var>$max.jumps</var></line>
<line indent="&#160;&#160;&#160;&#160;&#160;&#160;&#160;"><var>$found.supply</var><text>[</text><var>$destination</var><text>]&#160;=&#160;</text><var>$jumps</var></line>
<line indent="&#160;&#160;&#160;&#160;&#160;"><text>end</text></line>
<line indent="&#160;&#160;&#160;&#160;"><text>end</text></line>
<line indent="&#160;&#160;&#160;"><text>end</text></line>
<line indent="&#160;&#160;"><text>end</text></line>
<line indent="&#160;&#160;"><var>$destination&#160;=&#160;</var><text>get&#160;next&#160;key:&#160;table=</text><var>$table.supply</var><text>&#160;key=</text><var>$destination</var></line>
<line indent="&#160;"><text>end</text></line>
<line indent="&#160;"></line>
<line indent="&#160;"><var>if&#160;</var><text>size&#160;of&#160;table&#160;</text><var>$found.supply</var></line>
<line indent="&#160;&#160;"><var>$array&#160;=&#160;</var><text>sort&#160;table&#160;keys&#160;by&#160;value:&#160;table=</text><var>$found.supply</var></line>
<line indent="&#160;&#160;"><var>while&#160;</var><text>size&#160;of&#160;array&#160;</text><var>$array</var></line>
<line indent="&#160;&#160;&#160;"><var>$destination&#160;=&#160;</var><var>$array</var><text>[</text><var>0</var><text>]</text></line>
<line indent="&#160;&#160;&#160;"><text>remove&#160;element&#160;from&#160;array&#160;</text><var>$array</var><text>&#160;at&#160;index&#160;</text><var>0</var></line>
<line indent="&#160;&#160;&#160;"><var>if&#160;</var><var>$destination&#160;-&gt;</var><text>&#160;exists</text></line>
<line interruptable="@" indent="&#160;&#160;&#160;&#160;"><var>if&#160;not&#160;</var><var>$ship&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>!lib.player.saferoute</call><text>&#160;:&#160;</text><text>&#160;Destination=</text><var>$destination</var><text>&#160;</text><text>&#160;Ignore&#160;Jump=</text><var>[FALSE]</var><text>&#160;</text><text>&#160;Always&#160;Jump=</text><var>[TRUE]</var><text>&#160;</text><text>&#160;Additional&#160;Blacklist=</text><var>$table.blacklist.add</var><text>&#160;</text><text>&#160;Ignore&#160;Fuel=</text><var>[TRUE]</var></line>
<line indent="&#160;&#160;&#160;&#160;&#160;"><var>$sector&#160;=&#160;</var><var>$destination&#160;-&gt;</var><text>&#160;get&#160;sector</text></line>
<line indent="&#160;&#160;&#160;&#160;&#160;"><var>$table.noroute</var><text>[</text><var>$sector</var><text>]&#160;=&#160;</text><var>[TRUE]</var></line>
<line interruptable="@" indent="&#160;&#160;&#160;&#160;&#160;"><var>=&#160;</var><text>wait&#160;</text><var>10</var><text>&#160;ms</text></line>
<line indent="&#160;&#160;&#160;&#160;"><text>else</text></line>
<line indent="&#160;&#160;&#160;&#160;&#160;"><text>return&#160;</text><var>$destination</var></line>
<line indent="&#160;&#160;&#160;&#160;"><text>end</text></line>
<line indent="&#160;&#160;&#160;"><text>end</text></line>
<line indent="&#160;&#160;"><text>end</text></line>
<line indent="&#160;"><text>end</text></line>
<line indent=""><text>end</text></line>
<line indent=""></line>
<line indent=""><var>retry</var><text>:</text></line>
<line interruptable="@" indent=""><var>$destination&#160;=&#160;</var><var>$ship&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>lib.player.trade.finddest</call><text>&#160;:&#160;</text><text>&#160;Ware=</text><var>$a.ware</var><text>&#160;</text><text>&#160;Ware&#160;Amount=</text><var>$a.wareAmt</var><text>&#160;</text><text>&#160;Sell?=</text><var>$a.sell</var><text>&#160;</text><text>&#160;Exclude=</text><var>$a.excludeArray</var><text>&#160;</text><text>&#160;No&#160;Route&#160;Table=</text><var>$table.noroute</var><text>&#160;</text><text>&#160;Max&#160;Jumps=</text><var>null</var><text>&#160;</text><text>&#160;Price=</text><var>$ware.price</var><text>&#160;</text><text>&#160;Only&#160;With&#160;Satellites=</text><var>$need.sats</var><text>&#160;</text><text>&#160;Additional&#160;Blacklist=</text><var>$a.blacklst</var><text>&#160;</text><text>&#160;Ignore&#160;Fuel=</text><var>[TRUE]</var></line>
<line indent=""><var>if&#160;not&#160;</var><var>$destination&#160;-&gt;</var><text>&#160;exists</text></line>
<line indent="&#160;"><var>$relval&#160;=&#160;</var><text>get&#160;relvalue&#160;of&#160;</text><var>$a.ware</var></line>
<line indent="&#160;"><var>$ware.amt&#160;=&#160;</var><var>10000</var><text>&#160;</text><var>/</var><text>&#160;</text><var>$relval</var></line>
<line indent="&#160;"><var>do&#160;if&#160;</var><var>$ware.amt</var><text>&#160;</text><var>&lt;</var><text>&#160;</text><var>2</var></line>
<line indent="&#160;&#160;"><var>$ware.amt&#160;=&#160;</var><var>2</var></line>
<line interruptable="@" indent="&#160;"><var>$destination&#160;=&#160;</var><var>$ship&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>lib.player.trade.finddest</call><text>&#160;:&#160;</text><text>&#160;Ware=</text><var>$a.ware</var><text>&#160;</text><text>&#160;Ware&#160;Amount=</text><var>$a.wareAmt</var><text>&#160;</text><text>&#160;Sell?=</text><var>$a.sell</var><text>&#160;</text><text>&#160;Exclude=</text><var>$a.excludeArray</var><text>&#160;</text><text>&#160;No&#160;Route&#160;Table=</text><var>$table.noroute</var><text>&#160;</text><text>&#160;Max&#160;Jumps=</text><var>null</var><text>&#160;</text><text>&#160;Price=</text><var>$ware.price</var><text>&#160;</text><text>&#160;Only&#160;With&#160;Satellites=</text><var>$need.sats</var><text>&#160;</text><text>&#160;Additional&#160;Blacklist=</text><var>$a.blacklst</var><text>&#160;</text><text>&#160;Ignore&#160;Fuel=</text><var>[TRUE]</var></line>
<line indent=""><text>end</text></line>
<line indent=""><var>if&#160;not&#160;</var><var>$destination&#160;-&gt;</var><text>&#160;exists</text></line>
<line indent="&#160;"><var>$relval&#160;=&#160;</var><text>get&#160;relvalue&#160;of&#160;</text><var>$a.ware</var></line>
<line indent="&#160;"><var>$ware.amt&#160;=&#160;</var><var>5000</var><text>&#160;</text><var>/</var><text>&#160;</text><var>$relval</var></line>
<line indent="&#160;"><var>do&#160;if&#160;</var><var>$ware.amt</var><text>&#160;</text><var>&lt;</var><text>&#160;</text><var>2</var></line>
<line indent="&#160;&#160;"><var>$ware.amt&#160;=&#160;</var><var>2</var></line>
<line interruptable="@" indent="&#160;"><var>$destination&#160;=&#160;</var><var>$ship&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>lib.player.trade.finddest</call><text>&#160;:&#160;</text><text>&#160;Ware=</text><var>$a.ware</var><text>&#160;</text><text>&#160;Ware&#160;Amount=</text><var>$a.wareAmt</var><text>&#160;</text><text>&#160;Sell?=</text><var>$a.sell</var><text>&#160;</text><text>&#160;Exclude=</text><var>$a.excludeArray</var><text>&#160;</text><text>&#160;No&#160;Route&#160;Table=</text><var>$table.noroute</var><text>&#160;</text><text>&#160;Max&#160;Jumps=</text><var>null</var><text>&#160;</text><text>&#160;Price=</text><var>$ware.price</var><text>&#160;</text><text>&#160;Only&#160;With&#160;Satellites=</text><var>$need.sats</var><text>&#160;</text><text>&#160;Additional&#160;Blacklist=</text><var>$a.blacklst</var><text>&#160;</text><text>&#160;Ignore&#160;Fuel=</text><var>[TRUE]</var></line>
<line indent=""><text>end</text></line>
<line indent=""></line>
<line indent=""><var>if&#160;</var><var>$destination&#160;-&gt;</var><text>&#160;exists</text></line>
<line indent="&#160;"><var>if&#160;</var><var>$a.sell</var></line>
<line indent="&#160;&#160;"><var>$MIN.RELVAL&#160;=&#160;</var><var>3500</var></line>
<line indent="&#160;&#160;"><var>$ware.check&#160;=&#160;</var><var>$destination&#160;-&gt;</var><text>&#160;get&#160;free&#160;amount&#160;of&#160;ware&#160;</text><var>$a.ware</var><text>&#160;in&#160;cargo&#160;bay</text></line>
<line indent="&#160;"><text>else</text></line>
<line indent="&#160;&#160;"><var>$MIN.RELVAL&#160;=&#160;</var><var>5000</var></line>
<line indent="&#160;&#160;"><var>$ware.check&#160;=&#160;</var><var>$destination&#160;-&gt;</var><text>&#160;get&#160;true&#160;amount&#160;of&#160;ware&#160;</text><var>$a.ware</var><text>&#160;in&#160;cargo&#160;bay</text></line>
<line indent="&#160;"><text>end</text></line>
<line indent="&#160;"></line>
<line indent="&#160;"><var>$ware.relval&#160;=&#160;</var><var>$ware.check</var><text>&#160;</text><var>*</var><text>&#160;</text><var>$relval</var></line>
<line indent="&#160;"><var>if&#160;</var><var>$ware.relval</var><text>&#160;</text><var>&lt;</var><text>&#160;</text><var>$MIN.RELVAL</var></line>
<line indent="&#160;&#160;"></line>
<line indent="&#160;&#160;"><var>$ship.max&#160;=&#160;</var><var>$ship&#160;-&gt;</var><text>&#160;get&#160;max&#160;amount&#160;of&#160;ware&#160;</text><var>$a.ware</var><text>&#160;that&#160;can&#160;be&#160;stored&#160;in&#160;cargo&#160;bay</text></line>
<line indent="&#160;&#160;"><var>$ship.half&#160;=&#160;</var><var>$ship.max</var><text>&#160;</text><var>/</var><text>&#160;</text><var>2</var></line>
<line indent="&#160;&#160;"><var>if&#160;</var><var>$ware.check</var><text>&#160;</text><var>&lt;</var><text>&#160;</text><var>$ship.half</var></line>
<line indent="&#160;&#160;&#160;"><text>append&#160;</text><var>$destination</var><text>&#160;to&#160;array&#160;</text><var>$a.excludeArray</var></line>
<line interruptable="@" indent="&#160;&#160;&#160;"><var>=&#160;</var><text>wait&#160;</text><var>10</var><text>&#160;ms</text></line>
<line indent="&#160;&#160;&#160;"><text>goto&#160;label&#160;</text><var>retry</var></line>
<line indent="&#160;&#160;"><text>end</text></line>
<line indent="&#160;"><text>end</text></line>
<line indent=""><text>end</text></line>
<line indent=""></line>
<line indent=""><text>return&#160;</text><var>$destination</var></line>
</sourcetext>
<codearray>

<sval type="array" size="10">
  <sval type="string" val="plugin.stationmgr.finddest"/>
  <sval type="int" val="66"/>
  <sval type="string" val="Station Manager: Find destination station"/>
  <sval type="int" val="7"/>
  <sval type="int" val="0"/>
  <sval type="array" size="29">
    <sval type="string" val="a.ware"/>
    <sval type="string" val="a.wareAmt"/>
    <sval type="string" val="a.sell"/>
    <sval type="string" val="a.excludeArray"/>
    <sval type="string" val="a.ships"/>
    <sval type="string" val="a.tableNoRoute.jump"/>
    <sval type="string" val="a.norouteTable.nojump"/>
    <sval type="string" val="a.blacklst"/>
    <sval type="string" val="need.sats"/>
    <sval type="string" val="restrict"/>
    <sval type="string" val="table.blacklist.add"/>
    <sval type="string" val="ship"/>
    <sval type="string" val="table.noroute"/>
    <sval type="string" val="destination"/>
    <sval type="string" val="max.jumps"/>
    <sval type="string" val="ware.price"/>
    <sval type="string" val="relval"/>
    <sval type="string" val="MIN.RELVAL"/>
    <sval type="string" val="table.supply"/>
    <sval type="string" val="found.supply"/>
    <sval type="string" val="supply.amt"/>
    <sval type="string" val="ware.relval"/>
    <sval type="string" val="sector"/>
    <sval type="string" val="jumps"/>
    <sval type="string" val="array"/>
    <sval type="string" val="ware.amt"/>
    <sval type="string" val="ware.check"/>
    <sval type="string" val="ship.max"/>
    <sval type="string" val="ship.half"/>
  </sval>
  <sval type="array" size="90">
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="-536870393"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="3"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="128"/>
      <sval type="int" val="3"/>
      <sval type="int" val="4"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="8"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="9"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="156"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="5"/>
      <sval type="string" val="stationmgr.restrict"/>
      <sval type="int" val="9"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610610941"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="9"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="129"/>
      <sval type="int" val="-1610610936"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="9"/>
      <sval type="int" val="5"/>
      <sval type="string" val="sats"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="8"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="10"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="156"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="5"/>
      <sval type="string" val="egosoft.stationmgr.blacklist"/>
      <sval type="int" val="10"/>
    </sval>
    <sval type="array" size="14">
      <sval type="int" val="102"/>
      <sval type="string" val="plugin.stationmgr.getbestship"/>
      <sval type="int" val="11"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="4"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="618"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="11"/>
      <sval type="int" val="-1610609661"/>
      <sval type="int" val="9"/>
      <sval type="int" val="1048611"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="12"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="5"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="112"/>
      <sval type="int" val="13"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="12"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="6"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="13"/>
      <sval type="int" val="1"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610608381"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="2"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="2412"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="14"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="112"/>
      <sval type="int" val="18"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="644"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="14"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="627"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="15"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="705"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1610607101"/>
      <sval type="int" val="12"/>
      <sval type="int" val="2007"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="2305"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1610607101"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="143"/>
      <sval type="int" val="15"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="1140"/>
      <sval type="int" val="16"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="17"/>
      <sval type="int" val="1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="5000"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="2361"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="18"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610597373"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="18"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="1733"/>
      <sval type="int" val="19"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="1739"/>
      <sval type="int" val="13"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="18"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610600695"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="13"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="706"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="13"/>
      <sval type="int" val="-1610601213"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="20"/>
      <sval type="int" val="1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610603773"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="2"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="635"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="13"/>
      <sval type="int" val="-1610604029"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="620"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="13"/>
      <sval type="int" val="20"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="112"/>
      <sval type="int" val="37"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="1165"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="13"/>
      <sval type="int" val="-1610603261"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="619"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="13"/>
      <sval type="int" val="20"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610601213"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="20"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="21"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="20"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="16"/>
      <sval type="int" val="15"/>
      <sval type="int" val="13"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="13"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="25">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610601213"/>
      <sval type="int" val="7"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="20"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="1"/>
      <sval type="int" val="15"/>
      <sval type="int" val="4"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="21"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="17"/>
      <sval type="int" val="15"/>
      <sval type="int" val="2"/>
      <sval type="int" val="15"/>
      <sval type="int" val="10"/>
      <sval type="int" val="7"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="-2"/>
      <sval type="int" val="10"/>
      <sval type="int" val="-4"/>
      <sval type="int" val="2"/>
      <sval type="int" val="-5"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="703"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="13"/>
      <sval type="int" val="22"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="129"/>
      <sval type="int" val="-536859388"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="12"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="22"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="711"/>
      <sval type="int" val="23"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="6"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="22"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610601208"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="23"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="14"/>
      <sval type="int" val="15"/>
      <sval type="int" val="5"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="5"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="130"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="19"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="13"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="23"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="1739"/>
      <sval type="int" val="13"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="18"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="13"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="112"/>
      <sval type="int" val="28"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="1734"/>
      <sval type="int" val="-1610597373"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="19"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="2166"/>
      <sval type="int" val="24"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="19"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="131"/>
      <sval type="int" val="-1610597367"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="24"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="129"/>
      <sval type="int" val="13"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="24"/>
      <sval type="int" val="4"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="5">
      <sval type="int" val="136"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="24"/>
      <sval type="int" val="4"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="706"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="13"/>
      <sval type="int" val="-1610597629"/>
    </sval>
    <sval type="array" size="16">
      <sval type="int" val="102"/>
      <sval type="string" val="!lib.player.saferoute"/>
      <sval type="int" val="-536856060"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="11"/>
      <sval type="int" val="5"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="13"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="9"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="10"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="10"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="10"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="703"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="13"/>
      <sval type="int" val="22"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="130"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="12"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="22"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="10"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="105"/>
      <sval type="int" val="-2147483647"/>
      <sval type="int" val="4"/>
      <sval type="int" val="10"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="112"/>
      <sval type="int" val="59"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="103"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="13"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="112"/>
      <sval type="int" val="49"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="101"/>
      <sval type="string" val="retry"/>
    </sval>
    <sval type="array" size="26">
      <sval type="int" val="102"/>
      <sval type="string" val="lib.player.trade.finddest"/>
      <sval type="int" val="13"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="11"/>
      <sval type="int" val="10"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="2"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="12"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="15"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="8"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="7"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="10"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="706"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="13"/>
      <sval type="int" val="-536853500"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="1140"/>
      <sval type="int" val="16"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="25"/>
      <sval type="int" val="3"/>
      <sval type="int" val="4"/>
      <sval type="int" val="10000"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="16"/>
      <sval type="int" val="15"/>
      <sval type="int" val="14"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="14"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610595576"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="25"/>
      <sval type="int" val="4"/>
      <sval type="int" val="2"/>
      <sval type="int" val="15"/>
      <sval type="int" val="3"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="25"/>
      <sval type="int" val="1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="2"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="26">
      <sval type="int" val="102"/>
      <sval type="string" val="lib.player.trade.finddest"/>
      <sval type="int" val="13"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="11"/>
      <sval type="int" val="10"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="2"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="12"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="15"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="8"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="7"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="10"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="706"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="13"/>
      <sval type="int" val="-536851964"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="1140"/>
      <sval type="int" val="16"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="25"/>
      <sval type="int" val="3"/>
      <sval type="int" val="4"/>
      <sval type="int" val="5000"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="16"/>
      <sval type="int" val="15"/>
      <sval type="int" val="14"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="14"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610594040"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="25"/>
      <sval type="int" val="4"/>
      <sval type="int" val="2"/>
      <sval type="int" val="15"/>
      <sval type="int" val="3"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="25"/>
      <sval type="int" val="1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="2"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="26">
      <sval type="int" val="102"/>
      <sval type="string" val="lib.player.trade.finddest"/>
      <sval type="int" val="13"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="11"/>
      <sval type="int" val="10"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="2"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="12"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="15"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="8"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="7"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="10"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="706"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="13"/>
      <sval type="int" val="-1610589949"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610592509"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="2"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="17"/>
      <sval type="int" val="1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="3500"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="620"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="13"/>
      <sval type="int" val="26"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="112"/>
      <sval type="int" val="81"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="17"/>
      <sval type="int" val="1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="5000"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="619"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="13"/>
      <sval type="int" val="26"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="21"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="26"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="16"/>
      <sval type="int" val="15"/>
      <sval type="int" val="13"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="13"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610589949"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="21"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="17"/>
      <sval type="int" val="15"/>
      <sval type="int" val="3"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="621"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="11"/>
      <sval type="int" val="27"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="28"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="27"/>
      <sval type="int" val="4"/>
      <sval type="int" val="2"/>
      <sval type="int" val="15"/>
      <sval type="int" val="14"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="14"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610589949"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="26"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="28"/>
      <sval type="int" val="15"/>
      <sval type="int" val="3"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="5">
      <sval type="int" val="135"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="13"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="105"/>
      <sval type="int" val="-2147483647"/>
      <sval type="int" val="4"/>
      <sval type="int" val="10"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="100"/>
      <sval type="int" val="60"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="103"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="13"/>
    </sval>
  </sval>
  <sval type="array" size="8">
    <sval type="array" size="2">
      <sval type="int" val="13"/>
      <sval type="string" val="Ware"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="10"/>
      <sval type="string" val="Ware Amount"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="63"/>
      <sval type="string" val="Sell?"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="9"/>
      <sval type="string" val="Exclude"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="9"/>
      <sval type="string" val="Ship Array"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="9"/>
      <sval type="string" val="No Route Table"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="9"/>
      <sval type="string" val="No Route (no jump)"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="9"/>
      <sval type="string" val="Additional Blacklist"/>
    </sval>
  </sval>
  <sval type="array" size="51">
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="========================================"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="Station Manager"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="========================================"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="Finds a valid destination station"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="========================================"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="Author: Cycrow"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="Date: 2019/11/01"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="========================================"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="0"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="2"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="7"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="7"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="9"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="12"/>
      <sval type="int" val="5"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="13"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="13"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="17"/>
      <sval type="int" val="5"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="18"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="22"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="22"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="22"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="24"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="34"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="35"/>
      <sval type="int" val="5"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="37"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="37"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="37"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="45"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="45"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="45"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="45"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="47"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="47"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="58"/>
      <sval type="int" val="5"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="59"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="59"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="60"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="60"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="60"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="60"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="68"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="74"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="74"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="79"/>
      <sval type="int" val="5"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="81"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="81"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="83"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="89"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="89"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="89"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="89"/>
      <sval type="int" val="2"/>
    </sval>
  </sval>
  <sval type="int" val="0"/>
</sval>

</codearray>
<nosignature>9460</nosignature>
</script>
